<!DOCTYPE html>
<html lang="en">
  <%- include('partials/_head.ejs') %>
  <body>
    <%- include('partials/_header.ejs') %>
    <main role="main" class="container mt-4">
      <div class="d-flex justify-content-between align-items-center">
        <h2>Edit Project</h2>
        <form
          action="/api/projects/<%= project._id %>/delete"
          method="POST"
          onsubmit="return confirm('Are you sure you want to delete this project? This action cannot be undone.');"
        >
          <button
            type="submit"
            class="btn btn-danger"
            data-toggle="tooltip"
            title="Permanently delete this project. Cannot be undone..."
          >
            Delete Project
          </button>
        </form>
      </div>
      <form
        id="editProjectForm"
        action="/projects/<%= project._id %>/edit"
        method="POST"
      >
        <div class="mb-3">
          <label for="name" class="form-label" data-toggle="tooltip"
            >Project Name</label
          >
          <input
            type="text"
            id="name"
            name="name"
            class="form-control"
            value="<%= formatProjectNameForDisplay(project.name) %>"
            required
            data-toggle="tooltip"
            title="Please provide a name for your project."
          />
        </div>
        <div class="mb-3">
          <label
            for="phase"
            class="form-label"
            data-toggle="tooltip"
            title="Current phase of your project (e.g., Design, Construction)."
            >Phase</label
          >
          <input
            type="text"
            id="phase"
            name="phase"
            class="form-control"
            value="<%= project.phase %>"
            data-toggle="tooltip"
            title="Indicate the current phase of the project, such as 'Planning' or 'Execution'."
          />
        </div>
        <div class="mb-3">
          <label
            for="description"
            class="form-label"
            data-toggle="tooltip"
            title="Brief project description"
            >Description</label
          >
          <textarea
            id="description"
            name="description"
            class="form-control"
            rows="3"
            data-toggle="tooltip"
            title="Add any relevant details or notes about the project."
          >
<%= project.description %></textarea
          >
        </div>
        <div class="mb-3">
          <label
            for="customImage"
            class="form-label"
            data-toggle="tooltip"
            title="Image Link"
            >Custom Image URL</label
          >
          <input
            type="text"
            id="customImage"
            name="customImage"
            class="form-control"
            value="<%= project.customImage %>"
            data-toggle="tooltip"
            title="Provide the URL of an image to visually represent your project."
          />
        </div>
        <div class="mb-3">
          <label
            for="EBF"
            class="form-label"
            data-toggle="tooltip"
            title="Floor area (in m²) of your project."
            >Project m² (EBF)</label
          >
          <input
            type="number"
            id="EBF"
            name="EBF"
            class="form-control"
            value="<%= project.EBF %>"
            step="0.01"
            min="0"
            required
            data-toggle="tooltip"
            title="Enter the total floor area (in square meters) for the project."
          />
        </div>
        <div class="d-flex justify-content-between">
          <button
            type="submit"
            class="btn btn-success"
            data-toggle="tooltip"
            title="Save changes to your project."
          >
            Confirm
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="window.location.href='/dashboard'"
            data-toggle="tooltip"
            title="Discard changes and return to Project Home."
          >
            Cancel
          </button>
        </div>
      </form>
    </main>
    <%- include('partials/_footer.ejs') %>
    <script src="/js/projectForm.js"></script>
    <!-- Initialize tooltips -->
    <script>
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    </script>
  </body>
</html>
