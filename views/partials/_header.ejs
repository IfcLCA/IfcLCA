<nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" href="/">IfcLCA</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <% if (session && session.userId) { %>
        <li class="nav-item">
          <a class="nav-link" href="/dashboard">Dashboard</a>
        </li>
      <% } %>
    </ul>
    <ul class="navbar-nav ml-auto">
      <% if (typeof page !== 'undefined') { %>
        <% if (page === 'dashboard') { %>
          <li class="nav-item">
            <a href="/newProject" class="btn btn-primary">Create New Project</a>
          </li>
        <% } else if (page === 'projectHome' && project) { %>
          <!-- Hidden file input -->
          <input type="file" id="hiddenFileInput" style="display: none;" onchange="document.getElementById('ifcUploadForm').submit();">
          <!-- Visible button that triggers file input -->
          <li class="nav-item">
            <button type="button" class="btn btn-primary" onclick="document.getElementById('hiddenFileInput').click();">
              Upload IFC File
            </button>
          </li>
          <!-- Hidden form to submit -->
          <form id="ifcUploadForm" action="/api/projects/<%= project._id %>/upload" method="POST" enctype="multipart/form-data" style="display: none;">
            <input type="hidden" name="file" id="hiddenFileField" />
          </form>
        <% } %>
      <% } %>
      <% if (session && session.userId) { %>
        <li class="nav-item">
          <a class="nav-link" href="/auth/logout">Logout</a>
        </li>
      <% } else { %>
        <li class="nav-item">
          <a class="nav-link" href="/auth/login">Login</a>
        </li>
      <% } %>
    </ul>
  </div>
</nav>
